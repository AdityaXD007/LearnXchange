{% extends "base/base.html" %}
{% block content %}
    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <div class="container">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="page-title">My Calendar</h1>
                        <p class="page-description">Manage your availability and scheduled sessions</p>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="openModal('availabilityModal')" class="btn btn-outline">
                            <i class="fas fa-clock mr-2"></i>
                            Set Availability
                        </button>
                        <button onclick="openModal('blockTimeModal')" class="btn btn-primary">
                            <i class="fas fa-ban mr-2"></i>
                            Block Time
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <!-- Calendar Controls -->
            <div class="card mb-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-4">
                        <button onclick="changeMonth(-1)" class="btn btn-outline">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="text-xl font-semibold" id="currentMonth">January 2024</h2>
                        <button onclick="changeMonth(1)" class="btn btn-outline">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button onclick="goToToday()" class="btn btn-outline">Today</button>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2">
                            <div class="flex items-center gap-1">
                                <div class="w-3 h-3 bg-green-400 rounded"></div>
                                <span class="text-sm">Available</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <div class="w-3 h-3 bg-blue-500 rounded"></div>
                                <span class="text-sm">Scheduled</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <div class="w-3 h-3 bg-red-400 rounded"></div>
                                <span class="text-sm">Blocked</span>
                            </div>
                        </div>
                        <select class="form-input form-select"
                                style="width: auto"
                                onchange="changeView(this.value)">
                            <option value="month">Month View</option>
                            <option value="week">Week View</option>
                            <option value="day">Day View</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="flex gap-6">
                <!-- Main Calendar -->
                <div class="flex-1">
                    <div class="card">
                        <!-- Month View Calendar -->
                        <div id="monthView">
                            <div class="calendar-grid">
                                <!-- Day Headers -->
                                <div class="day-header">Sun</div>
                                <div class="day-header">Mon</div>
                                <div class="day-header">Tue</div>
                                <div class="day-header">Wed</div>
                                <div class="day-header">Thu</div>
                                <div class="day-header">Fri</div>
                                <div class="day-header">Sat</div>
                                <!-- Calendar Days -->
                                <div class="calendar-day other-month">
                                    <span class="day-number">31</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">1</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">2</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">3</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">4</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">5</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">6</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">7</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">8</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">9</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">10</span>
                                    <div class="event-indicator bg-blue-500"></div>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">11</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">12</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">13</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">14</span>
                                </div>
                                <div class="calendar-day today" onclick="selectDate(15)">
                                    <span class="day-number">15</span>
                                    <div class="event-indicator bg-blue-500"></div>
                                    <div class="event-indicator bg-green-400"></div>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">16</span>
                                    <div class="event-indicator bg-blue-500"></div>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">17</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">18</span>
                                    <div class="event-indicator bg-blue-500"></div>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">19</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">20</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">21</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">22</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">23</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">24</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">25</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">26</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">27</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">28</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">29</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">30</span>
                                </div>
                                <div class="calendar-day">
                                    <span class="day-number">31</span>
                                </div>
                                <div class="calendar-day other-month">
                                    <span class="day-number">1</span>
                                </div>
                                <div class="calendar-day other-month">
                                    <span class="day-number">2</span>
                                </div>
                                <div class="calendar-day other-month">
                                    <span class="day-number">3</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sidebar -->
                <div class="w-80 space-y-6">
                    <!-- Today's Schedule -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Today's Schedule</h3>
                            <span class="text-sm text-gray-600">January 15, 2024</span>
                        </div>
                        <div class="space-y-3">
                            <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                    <span class="font-medium text-sm">JavaScript Fundamentals</span>
                                </div>
                                <div class="text-xs text-gray-600 ml-5">
                                    2:00 PM - 3:00 PM
                                    <br />
                                    Learning from Sarah Chen
                                </div>
                            </div>
                            <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="font-medium text-sm">Available</span>
                                </div>
                                <div class="text-xs text-gray-600 ml-5">
                                    4:00 PM - 6:00 PM
                                    <br />
                                    Open for sessions
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Quick Actions -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Quick Actions</h3>
                        </div>
                        <div class="space-y-3">
                            <button onclick="openModal('quickAvailabilityModal')"
                                    class="w-full btn btn-outline text-left">
                                <i class="fas fa-plus mr-2"></i>
                                Add Available Time
                            </button>
                            <button onclick="openModal('blockTimeModal')"
                                    class="w-full btn btn-outline text-left">
                                <i class="fas fa-ban mr-2"></i>
                                Block Time Slot
                            </button>
                            <button onclick="copyScheduleLink()" class="w-full btn btn-outline text-left">
                                <i class="fas fa-link mr-2"></i>
                                Copy Schedule Link
                            </button>
                            <button onclick="exportCalendar()" class="w-full btn btn-outline text-left">
                                <i class="fas fa-download mr-2"></i>
                                Export to Calendar
                            </button>
                        </div>
                    </div>
                    <!-- Upcoming Sessions -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Upcoming Sessions</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="text-sm">
                                <div class="font-medium text-gray-900">Tomorrow, 10:00 AM</div>
                                <div class="text-gray-600">Spanish Conversation with Maria</div>
                            </div>
                            <div class="text-sm">
                                <div class="font-medium text-gray-900">Friday, 3:00 PM</div>
                                <div class="text-gray-600">Teaching React to Alex</div>
                            </div>
                            <div class="text-sm">
                                <div class="font-medium text-gray-900">Next Week</div>
                                <div class="text-gray-600">Photography with Tom</div>
                            </div>
                        </div>
                    </div>
                    <!-- Availability Summary -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">This Week's Availability</h3>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>Total Available Hours</span>
                                <span class="font-semibold">12 hours</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Booked Sessions</span>
                                <span class="font-semibold text-blue-600">5 hours</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Available for Booking</span>
                                <span class="font-semibold text-green-600">7 hours</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Set Availability Modal -->
    <div id="availabilityModal" class="modal" style="display: none">
        <div class="modal-overlay">
            <div class="modal-content" style="max-width: 600px">
                <div class="modal-header">
                    <h3>Set Weekly Availability</h3>
                    <button onclick="closeModal(document.getElementById('availabilityModal'))">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-6">
                    <p class="text-gray-600">
                        Set your regular weekly availability. You can always make changes for
                        specific dates.
                    </p>
                    <div class="space-y-4">
                        <!-- Monday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" checked />
                                    <span class="font-medium">Monday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="09:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="17:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Tuesday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" checked />
                                    <span class="font-medium">Tuesday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="09:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="17:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Wednesday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" checked />
                                    <span class="font-medium">Wednesday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="09:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="17:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Thursday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" checked />
                                    <span class="font-medium">Thursday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="09:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="17:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Friday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" checked />
                                    <span class="font-medium">Friday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="09:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="17:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Saturday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" />
                                    <span class="font-medium">Saturday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="10:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="14:00" style="width: 120px" />
                            </div>
                        </div>
                        <!-- Sunday -->
                        <div class="flex items-center gap-4">
                            <div class="w-20">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2" />
                                    <span class="font-medium">Sunday</span>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="time" class="form-input" value="10:00" style="width: 120px" />
                                <span>to</span>
                                <input type="time" class="form-input" value="14:00" style="width: 120px" />
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Time Zone</label>
                        <select class="form-input form-select">
                            <option value="PST">Pacific Standard Time (PST)</option>
                            <option value="MST">Mountain Standard Time (MST)</option>
                            <option value="CST">Central Standard Time (CST)</option>
                            <option value="EST">Eastern Standard Time (EST)</option>
                        </select>
                    </div>
                    <div class="flex gap-3 pt-4">
                        <button class="btn btn-primary">Save Availability</button>
                        <button onclick="closeModal(document.getElementById('availabilityModal'))"
                                class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Block Time Modal -->
    <div id="blockTimeModal" class="modal" style="display: none">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Block Time Slot</h3>
                    <button onclick="closeModal(document.getElementById('blockTimeModal'))">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" value="2024-01-15" />
                    </div>
                    <div class="flex gap-3">
                        <div class="flex-1">
                            <label class="form-label">Start Time</label>
                            <input type="time" class="form-input" value="14:00" />
                        </div>
                        <div class="flex-1">
                            <label class="form-label">End Time</label>
                            <input type="time" class="form-input" value="16:00" />
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Reason (Optional)</label>
                        <input type="text"
                               class="form-input"
                               placeholder="e.g., Personal appointment, Break, etc." />
                    </div>
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" />
                            <span class="text-sm">Repeat weekly</span>
                        </label>
                    </div>
                    <div class="flex gap-3 pt-4">
                        <button class="btn btn-primary">Block Time</button>
                        <button onclick="closeModal(document.getElementById('blockTimeModal'))"
                                class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Quick Availability Modal -->
    <div id="quickAvailabilityModal" class="modal" style="display: none">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Available Time</h3>
                    <button onclick="closeModal(document.getElementById('quickAvailabilityModal'))">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" value="2024-01-15" />
                    </div>
                    <div class="flex gap-3">
                        <div class="flex-1">
                            <label class="form-label">Start Time</label>
                            <input type="time" class="form-input" value="16:00" />
                        </div>
                        <div class="flex-1">
                            <label class="form-label">End Time</label>
                            <input type="time" class="form-input" value="18:00" />
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Skills Available For</label>
                        <select class="form-input form-select" multiple style="height: 100px">
                            <option value="javascript">JavaScript</option>
                            <option value="react">React</option>
                            <option value="css">CSS</option>
                            <option value="nodejs">Node.js</option>
                        </select>
                        <div class="text-xs text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple skills</div>
                    </div>
                    <div class="flex gap-3 pt-4">
                        <button class="btn btn-primary">Add Availability</button>
                        <button onclick="closeModal(document.getElementById('quickAvailabilityModal'))"
                                class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="./main.js"></script>
    <script>
  let currentDate = new Date();

  function changeMonth(direction) {
    currentDate.setMonth(currentDate.getMonth() + direction);
    updateMonthDisplay();
  }

  function goToToday() {
    currentDate = new Date();
    updateMonthDisplay();
  }

  function updateMonthDisplay() {
    const monthNames = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ];
    document.getElementById("currentMonth").textContent = `${
      monthNames[currentDate.getMonth()]
    } ${currentDate.getFullYear()}`;
  }

  function changeView(view) {
    // Implementation for different calendar views
    console.log(`Changing to ${view} view`);
  }

  function selectDate(day) {
    alert(`Selected January ${day}, 2024`);
  }

  function openModal(modalId) {
    document.getElementById(modalId).style.display = "flex";
  }

  function closeModal(modal) {
    modal.style.display = "none";
  }

  function copyScheduleLink() {
    navigator.clipboard.writeText("https://skillswap.com/schedule/john-doe");
    alert("Schedule link copied to clipboard!");
  }

  function exportCalendar() {
    alert("Exporting calendar to your default calendar app...");
  }

  // Add calendar-specific styles
  const style = document.createElement("style");
  style.textContent = `
            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 1px;
                background: #e5e7eb;
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                overflow: hidden;
            }

            .day-header {
                background: #f9fafb;
                padding: 12px 8px;
                text-align: center;
                font-weight: 600;
                font-size: 0.875rem;
                color: #6b7280;
            }

            .calendar-day {
                background: white;
                min-height: 100px;
                padding: 8px;
                position: relative;
                cursor: pointer;
                transition: background-color 0.2s;
            }

            .calendar-day:hover {
                background: #f9fafb;
            }

            .calendar-day.today {
                background: #dbeafe;
            }

            .calendar-day.other-month {
                background: #f9fafb;
                color: #9ca3af;
            }

            .day-number {
                font-weight: 500;
                font-size: 0.875rem;
            }

            .event-indicator {
                position: absolute;
                bottom: 4px;
                left: 4px;
                width: 6px;
                height: 6px;
                border-radius: 50%;
                margin-right: 2px;
                display: inline-block;
            }

            .event-indicator + .event-indicator {
                left: 12px;
            }

            .modal {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            }

            .modal-overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }

            .modal-content {
                background: white;
                border-radius: 12px;
                padding: 24px;
                max-width: 500px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                position: relative;
                z-index: 1001;
            }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 24px;
                padding-bottom: 16px;
                border-bottom: 1px solid #e5e7eb;
            }

            .modal-header h3 {
                font-size: 1.25rem;
                font-weight: 600;
                color: #1f2937;
            }

            .modal-header button {
                background: none;
                border: none;
                color: #6b7280;
                cursor: pointer;
                font-size: 1.25rem;
            }
        `;
  document.head.appendChild(style);
    </script>
{% endblock content %}
